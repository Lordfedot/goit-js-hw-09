{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,UAEa,CACXC,WAAYC,SAASC,cAAc,WAEhCF,WAAWG,iBAAiB,UAqBjC,SAAsBC,GACpBA,EAAEC,iBACFC,EAAQC,OAAOH,EAAEI,cAAcC,SAAS,GAAGC,OAC3CC,EAAOJ,OAAOH,EAAEI,cAAcC,SAAS,GAAGC,OAC1CE,EAASL,OAAOH,EAAEI,cAAcC,SAAS,GAAGC,OAC5CG,EAAW,EAEXC,EAAYD,EAAUP,GAgBxB,WACE,MAAMS,EAAaC,aAAY,KAC7BH,GAAY,EACRA,EAAWD,EACbK,cAAcF,IAGhBT,GAAgBK,EAChBG,EAAYD,EAAUP,GAAM,GAC5BK,E,CAxBFO,E,IA3BF,IAAIZ,EAAQ,EACRK,EAAO,EACPC,EAAS,EACTC,EAAW,EA4Bf,SAASC,EAAYK,EAAUC,GA1B/B,IAAuBC,EAAUC,GAAVD,EA2BPF,EA3BiBG,EA2BPF,EA1BjB,IAAIG,SAAQ,CAACC,EAASC,KAC3BC,YAAW,KACaC,KAAKC,SAAW,GAEpCJ,EAAQ,CAAEK,SAAAR,EAAUS,MAAAR,IAGpBG,EAAO,CAAEI,SAAAR,EAAUS,MAAAR,GAAQ,GAE7BA,EAAM,KAkBTS,MAAK,EAAGF,SAAAG,EAAUF,MAAAG,MACjBC,EAAApC,GAASqC,OAAOC,QAAQ,uBAAqBJ,QAAiBC,MAAU,IAEzEI,OAAM,EAAGR,SAAAS,EAAUR,MAAAS,MAClBL,EAAApC,GAASqC,OAAOK,QAAQ,sBAAoBF,QAAeC,MAAU,G","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from \"notiflix\";\n\nconst refs = {\n  submitForm: document.querySelector('.form'),\n}\nrefs.submitForm.addEventListener('submit', onFormsubmit)\n\nlet delay = 0\nlet step = 0\nlet amount = 0\nlet position = 1\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    setTimeout(()=>{\n      const shouldResolve = Math.random() > 0.3;\n      if (shouldResolve) {\n        resolve({ position, delay })\n      }\n      else{\n        reject({ position, delay })\n      }\n    },delay) \n  });\n}\n\nfunction onFormsubmit(e) {\n  e.preventDefault()\n  delay = Number(e.currentTarget.elements[0].value)\n  step = Number(e.currentTarget.elements[1].value)\n  amount = Number(e.currentTarget.elements[2].value)\n  position = 1\n\n  makePromise(position, delay)\n  makeInterval()\n\n}\n\nfunction makePromise(position, delay) {\n  createPromise(position, delay)\n  .then(({ position, delay }) => {\n    Notiflix.Notify.success(`✅ Fulfilled promise ${position} in ${delay}ms`);\n  })\n  .catch(({ position, delay }) => {\n    Notiflix.Notify.failure(`❌ Rejected promise ${position} in ${delay}ms`);\n  })\n}\n\n\nfunction makeInterval() {\n  const intervalId = setInterval(()=>{\n    position += 1\n    if (position > amount) {\n      clearInterval(intervalId)\n      return\n    }\n    delay = delay + step\n    makePromise(position, delay)\n  },step)\n  return intervalId\n}"],"names":["$eWCmQ","parcelRequire","submitForm","document","querySelector","addEventListener","e","preventDefault","$47d4ff9957288465$var$delay","Number","currentTarget","elements","value","$47d4ff9957288465$var$step","$47d4ff9957288465$var$amount","$47d4ff9957288465$var$position","$47d4ff9957288465$var$makePromise","intervalId","setInterval","clearInterval","$47d4ff9957288465$var$makeInterval","position2","delay2","position1","delay1","Promise","resolve","reject","setTimeout","Math","random","position","delay","then","position3","delay3","$parcel$interopDefault","Notify","success","catch","position4","delay4","failure"],"version":3,"file":"03-promises.efdcaebc.js.map"}